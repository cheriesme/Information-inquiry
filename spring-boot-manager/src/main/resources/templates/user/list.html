<!doctype html>
<html lang="en" xmlns:th="http://www.springframework.org/schema/data/jaxb">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.5">
    <title>主页</title>

    <!-- Bootstrap core CSS -->
    <!--<link href="../static/css/tree.css" rel="stylesheet" th:href="@{/css/tree.css}">-->
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../static/css/dashaboard.css" th:href="@{/css/dashaboard.css}">
    <link href="../static/css/navstyle.css" th:href="@{/css/navstyle.css}" rel="stylesheet" type="text/css" />
    <link href="../static/css/zTreeStyle.css" th:href="@{/css/zTreeStyle.css}" rel="stylesheet" type="text/css" />


    <script src="../static/js/jquery.min.js" type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <script src="../static/js/bootstrap.min.js" type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
    <script src="../static/js/jquery.slim.min.js" type="text/javascript" th:src="@{/js/jquery.slim.min.js}"></script>
    <script src="../static/js/popper.min.js" type="text/javascript" th:src="@{/js/popper.min.js}"></script>
    <script src="../static/js/jquery.slimscroll.min.js" type="text/javascript" th:src="@{/js/jquery.slimscroll.min.js}"></script>
    <script src="../static/js/jquery.metisMenu.js" type="text/javascript" th:src="@{/js/jquery.metisMenu.js}"></script>
    <script src="../static/js/jquery.contextMenu.min.js" type="text/javascript" th:src="@{/js/jquery.contextMenu.min.js}"></script>
    <script src="../static/js/bootstrap-treetable.js" type="text/javascript" th:src="@{/js/bootstrap-treetable.js}"></script>
    <script src="../static/js/jquery-1.4.4.min.js" type="text/javascript" th:src="@{/js/jquery-1.4.4.min.js}"></script>
    <script src="../static/js/jquery.ztree.core.js" type="text/javascript" th:src="@{/js/jquery.ztree.core.js}"></script>
    <!--<script src="../static/Ajax.libs/treeselect.js" type="text/javascript" th:src="@{/Ajax.libs/jquery.ztree.core.js}"></script>-->

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 568px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>
<div th:replace="common/bar::topbar"></div>

<div class="container-fluid">
    <div class="row">
        <div th:replace="common/bar::sidebar(activeurl='umps')"></div>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">

            <div style="width: 100%;height: 150px;margin-top: 10px;border-radius: 6px;border: 1px solid #ced4da">
                <form action="/main/stemp" method="post" >
                    <div class="mb-1"style="float: left;margin-top: 40px;margin-right: 150px">
                        <label >账号：</label><input type="text" id="email1" name="account" placeholder="登陆账号" style="height: 36px;width: 300px;border-radius:3px;border: 1px solid #ced4da">
                    </div>
                    <div class="mb-2" style="float: left;margin-top: 40px;margin-right: 150px">
                        姓名：<input type="text" c id="username" name="phone" placeholder="姓名" style="height: 36px;width: 300px;border-radius:3px;border: 1px solid #ced4da">
                    </div>
                    <!--<div class="form-group" style="float: left;margin-top: 40px;">-->
                        <!--用户状态：<select name="deparmentname"  id="exampleFormControlSelect1"style="height: 36px;width: 300px;border-radius:3px;border: 1px solid #ced4da">-->
                        <!--<option>停用</option>-->
                        <!--<option>启用</option>-->
                    <!--</select>-->
                    <!--</div>-->
                    <div class="mb-2" style=";clear: left;margin-left: 60%">
                        <input type="submit" class="btn btn-info" placeholder="搜索"style="margin-right: 10%" id="select" />
                        <input type="reset" class="btn btn-info" placeholder="重置" id="reset" />
                        <p style="color: red" th:text="${msg}" th:if="${not #strings.isEmpty(msg)}"></p>
                    </div>

                </form>
            </div>
            <div class="treeandlist" style="float: left;width: 15% ;border-right: 1px solid #ced4da;height:700px">
                <div class="box box-main" >
                    <div class="content_wrap">
                        <ul id="treeDemo" class="ztree"></ul>
                    </div>

                    </div>
                </div >
            <div class="table-responsive" style="width: 85% ;float: right">
                <h2 style="width: 85%;float: left"><a class="btn btn-sm btn-success" href="#" th:href="@{/main/emp}">新增</a> <a href="#" class="btn btn-sm btn-success"> 修改</a>
                    <a href="#"class="btn btn-sm btn-success"> 删除</a> <a href="#"class="btn btn-sm btn-success">导出</a></h2>
                <table class="table table-striped table-sm">
                    <thead>
                    <tr>
                        <th><input type="checkbox" name="checkbox0" id="xx" /></th>
                        <th>I D</th>
                        <th>工号</th>
                        <th>姓名</th>
                        <th>账号</th>
                        <th>密码</th>
                        <th>性别</th>
                        <th>年龄</th>
                        <th>住址</th>
                        <th>号码</th>
                        <th>部门</th>
                        <th>岗位</th>
                        <th>角色</th>
                        <th>操作</th>
                    </tr>
                    <tbody id="tree">
                    <tr th:each="nav:${umps}" >
                        <td><input type="checkbox" name="checkbox0" id="x" /></td>
                        <td><span th:text="${nav.id}"></span></td>
                        <td><span th:text="${nav.userid}"></span></td>
                        <td><span th:text="${nav.username}"></span></td>
                        <td><span th:text="${nav.account}"></span></td>
                        <td><span th:text="${nav.password}"></span></td>
                        <td><span th:text="${nav.sex==0?'女':'男'}"></span></td>
                        <td><span th:text="${nav.age}"></span></td>
                        <td><span th:text="${nav.address}"></span></td>
                        <td><span th:text="${nav.phone}"></span></td>
                        <td><span th:text="${nav.deparmentname}"></span></td>
                        <td><span th:text="${nav.staffname}"></span></td>
                        <td><span th:text="${nav.rolename}"></span></td>
                        <td><a class="btn btn-sm btn-primary" th:href="@{/main/empe/}+${nav.id}">编辑</a>
                            <button th:attr="Dle_url=@{/main/empd/}+${nav.id}" type="submit" class="btn btn-sm btn-danger deleteBtn" >删除</button>
                        </td>
                    </tr>
                </tbody>
                    </thead>
                </table>
            </div>
        </main>
        <form id="deleteEmpeform" method="post">
        <input type="hidden" name="_method" value="delete">
        </form>
    </div>
</div>
//点击取消也能删除已修复
<script>
    $(".deleteBtn").click(function () {

        if(confirm("确定要删除吗？"))
        {
    $("#deleteEmpeform").attr("action", $(this).attr("Dle_url")).submit();
            return true;
        }
        else
        {
            return false;
        }
    });

    var setting = {
        view: {
            showIcon: showIconForTree
        },
        data: {
            simpleData: {
                enable: true
            }
        }
    };

    var zNodes =[
        { id:1, pId:0, name:"->远洋数据", open:true},
        { id:11, pId:1, name:"->江苏远洋总公司" },
        { id:111, pId:11, name:"->研发部" ,t:"id=111"},
        { id:112, pId:11, name:"->测试部"},
        { id:113, pId:11, name:"->市场部"},
        { id:114, pId:11, name:"->生产部"},
        { id:12, pId:1, name:"->内蒙分公司"},
        { id:121, pId:12, name:"->研发部"},
        { id:122, pId:12, name:"->测试部"},
        { id:123, pId:12, name:"->市场部"},
        { id:124, pId:12, name:"->生产部"},

    ];

    function showIconForTree(treeId, treeNode) {
        return !treeNode.isParent;
    };

    $(document).ready(function(){
        $.fn.zTree.init($("#treeDemo"), setting, zNodes);
    });
    $(function () {
        $("#111").onClick(function () {
            $.post("${pageContext.request.contextpath}/main/tree",function (data) {
                var html="";
                for (var i=0;i<data.length;i++){
                    html +="<tr>"+
                        "<td>"+data[i].id+"</td>"+
                        "<td>"+data[i].userid+"</td>"+
                        "<td>"+data[i].account+"</td>"+
                        "<td>"+data[i].password+"</td>"+
                        "<td>"+data[i].sex+"</td>"+
                        "<td>"+data[i].age+"</td>"+
                        "<td>"+data[i].deparmentname+"</td>"+
                        "<td>"+data[i].staffname+"</td>"+
                        "<td>"+data[i].address+"</td>"+
                        "<td>"+data[i].phone+"</td>"

                }
                $("#tree").html(html);
            })
        })
    })
    //-->

</script>
</body>
</html>

